#pragma once
#pragma comment(linker,"\"/manifestdependency:type='win32' \
name='Microsoft.Windows.Common-Controls' version='6.0.0.0' \
processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"")

#include <Windows.h>
#include <Commctrl.h>
#include <string>
#include <exception>
#include <stdexcept>

#include "blueScreen.h"

/**
 * @file winGUI.h
 *
 * @author RussDev
 * GitHub: https://github.com/RussDev46
 *
 */

class Window
{
	enum class IDC_ID
	{
		TEXT_TITLE_ID,
		TEXT_DEFAULT_ID,
		BUTTON_START_ID,
	};
public:
	explicit Window();
	~Window();

	int Run();

private:
	static LRESULT CALLBACK applicationProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);
	LRESULT	CALLBACK windowProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam);

	void initNativeWindowObj();
	void createNativeControls();
	LPCWSTR ExeptToWSTR(const char* exept);

	void skullCmd(STARTUPINFO si, PROCESS_INFORMATION pi);
	void matrixCmd(STARTUPINFO si, PROCESS_INFORMATION pi);
	void runMatrix();
	void createProcCMD(std::string, STARTUPINFO si, PROCESS_INFORMATION pi, bool wait);

private:
	const LPCWSTR	AppName{ L"blu" };
	const LPCWSTR	AppClassNameW{ L"blu_class" };
	const LPCSTR	AppClassName{ "blu_class" };
	const int			AppWidth{ 900 };
	const int			AppHeight{ 500 };

	HWND	hWnd{};
	HWND	hDefaultText{}, hJaButton{}, hNeinButton{};
	HBRUSH	hbrBackgroundColor{};
	HFONT	hfFont{};

	HBITMAP g_hbmBall = NULL;
	HBITMAP hbmOld = NULL;
};


